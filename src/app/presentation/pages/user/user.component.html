<div class="user-container">
    <!-- Left Panel: List and Filters -->
    <div class="list-panel">
        <h2>Gesti√≥n de Usuarios</h2>

        <div class="filters">
            <div class="form-group">
                <label>Nombre:</label>
                <input type="text" [(ngModel)]="filterName" (input)="onFilterChange()"
                    placeholder="Buscar por nombre...">
            </div>
            <div class="form-group">
                <label>Estado:</label>
                <select [(ngModel)]="filterState" (change)="onFilterChange()">
                    <option [ngValue]="null">Todos</option>
                    <option [ngValue]="true">Activo</option>
                    <option [ngValue]="false">Inactivo</option>
                </select>
            </div>
        </div>

        <table class="user-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Usuario</th>
                    <th>Email</th>
                    <th>Rol</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of users">
                    <td>{{ user.nombres }}</td>
                    <td>{{ user.userName }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.rol }}</td>
                    <td>
                        <span [class.active]="user.activo" [class.inactive]="!user.activo">
                            {{ user.activo ? 'Activo' : 'Inactivo' }}
                        </span>
                    </td>
                    <td class="actions">
                        <button class="btn-icon edit" (click)="editUser(user)" title="Editar">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn-icon delete" (click)="deleteUser(user.idUsuario)" title="Eliminar">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="pagination">
            <button (click)="prevPage()" [disabled]="pageNumber === 1">Anterior</button>
            <span>P√°gina {{ pageNumber }}</span>
            <button (click)="nextPage()" [disabled]="disableNext">Siguiente</button>
        </div>
    </div>

    <!-- Right Panel: Create/Edit User Form -->
    <div class="create-panel">
        <h3>{{ isEditing ? 'Editar Usuario' : 'Crear Nuevo Usuario' }}</h3>
        <form (ngSubmit)="saveUser()">
            <div class="form-group" *ngIf="!isEditing">
                <label>Usuario:</label>
                <input type="text" [(ngModel)]="newUser.userName" name="userName" required>
            </div>
            <div class="form-group" *ngIf="!isEditing">
                <label>Contrase√±a:</label>
                <input type="password" [(ngModel)]="newUser.passwordHash" name="passwordHash" required>
            </div>
            <div class="form-group">
                <label>Nombre:</label>
                <input type="text" [(ngModel)]="newUser.nombre" name="nombre" required>
            </div>
            <div class="form-group">
                <label>Apellido:</label>
                <input type="text" [(ngModel)]="newUser.apellido" name="apellido" required>
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" [(ngModel)]="newUser.email" name="email" required>
            </div>
            <div class="form-group">
                <label>Rol:</label>
                <input type="text" [(ngModel)]="newUser.rol" name="rol" required>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-create">{{ isEditing ? 'Guardar Cambios' : 'Crear Usuario' }}</button>
                <button type="button" class="btn-cancel" *ngIf="isEditing" (click)="resetForm()">Cancelar</button>
            </div>
        </form>
    </div>
</div>